def featuring(df):
    features = pd.DataFrame()
    features = pd.DataFrame(index=df.index)
    features['Symbol'] = df['Symbol']
    features['Date'] = df['Date']
    features['FOpen'] = df['Open']
    features['FHigh'] = df['High']
    features['FLow'] = df['Low']
    features['FClose'] = df['Close']
    features['FSTOCHK'] = df['slow_K5']
    features['FSTOCHD'] = df['slow_D5']
    features['FPerQ'] = df['PerQ']
    features['FEMA_21'] = df['Close'] - df['EMA_21'] # 0.76 en *, 0.48 en + et 0.35 en -
    features['FEMA_8'] = df['Close'] - df['EMA_8']# 1.31 en *
    features['FADRLo'] = df['Close'] - df['ADR_Low'] # 1.38 
    features['FADRHi'] = df['Close'] - df['ADR_High'] # 1.59 
    features['FRVI40'] = df['Close'] - df['RVI'] # 0.21 en *, 0.07 seul et 0 avec *df['Close']/100
    features['FRVI60'] = df['Close'] - df['RVI'] # 0.21 en *, 0.07 seul et 0 avec *df['Close']/100
    features['FONLOSMA5'] = df['Close'] - df['ONLOSMA_5'] # 0.9 en *, 0.14 seul et 0 avec df['Low'] - 
    features['FONHISMA5'] = df['Close'] - df['ONHISMA_5'] # 0.97 en *, 0.41 seul et  0.07 avec df['High'] - 
    features['FONLOSMA21'] = df['Close'] - df['ONLOSMA_21'] # 0.35 en *, 0.28 seul et 0 avec df['Low'] - 
    features['FONHISMA21'] = df['Close'] - df['ONHISMA_21'] # 1.04 en *, 0.55 seul et 0.28 avec df['High'] - 
    features['FONLOSMA34'] = df['Close'] - df['ONLOSMA_34'] # 0.55 en *, 0.35 seul et 0 avec df['Low'] - 
    features['FONHISMA34'] = df['High'] - df['ONHISMA_34'] # 0.83 en *, 0.48 en + 0.14 avec et 0 sans
    features['FSBGAMMA'] = df['SB_Gamma'] - df['Close'] # 0.14 avec + et 0 sans * df['Close']
    features['FOPENWEEKLY'] = df['Close'] - df['OpenShift_weekly'] # 0.55 en * et 0.28 en +
    features['FHIGHWEEKLY'] = df['Close'] - df['HighShift_weekly'] # 0.48 en * et 0 en -
    features['FLOWWEEKLY'] = df['Close'] - df['LowShift_weekly'] # 0.35 en * et 0.07 en -
    features['FCLOSEWEEKLY'] = df['Close'] - df['CloseShift_weekly'] # 0.48 en * et 0 en -
    features['FOPENDAILY'] = df['Close'] - df['OpenShift_daily'] # 0.14 en * et 0.14 en -
    features['FHIGHDAILY'] = df['Close'] - df['HighShift_daily'] # 1.24 en * et 0 en -
    features['FLOWDAILY'] = df['Close'] - df['LowShift_daily'] # 0.69 en * et 0 en -
    features['FCLOSEDAILY'] = df['Close'] - df['CloseShift_daily'] # 1.24 en * et 0 en -
    '''#features['FOPENHOURLY'] = df['Close'] - df['OpenShift_hourly']#.shift(1)
    #features['FHIGHHOURLY'] = df['Close'] - df['HighShift_hourly']#.shift(1)
    #features['FLOWHOURLY'] = df['Close'] - df['LowShift_hourly']#.shift(1)
    #features['FCLOSEHOURLY'] = df['Close'] - df['CloseShift_hourly']#.shift(1)'''
    features['FDELTABOL'] = df['UpperBand'] - df['LowerBand']
    features['FSMA200'] = (df['Close'] - df['SMA_200']) # 0.41 en * et 0 en -
    features['FBOLUP20'] = (df['Close'] - df['UpperBand']) # 0.55 en * et 0.21 en -
    features['FBOLLOW20'] = (df['Close'] - df['LowerBand']) # 0.14 en * et 0.21 en -
    features['FRSI2H'] = df['Close'] - df['RSI_2_hourly'] # 0.0 en * et 0.14 en -
    features['FRSI14H'] = df['Close'] - df['RSI_14_hourly'] # 0.07 en * et 0.41 en -
    features['FPP'] = df['Close'] - df['PP'] # 0.35 en * et 0 en -
    features['FS38'] = df['Close'] - df['S38'] # 0.28 en * et 0 en -
    features['FS62'] = df['Close'] - df['S62'] # 0.48 en * et 0 en -
    features['FS78'] = df['Close'] - df['S78'] # 0.28 en * et 0 en -
    features['FS100'] = df['Close'] - df['S100'] # 0.14 en * et 0.07 en -
    features['FS138'] = df['Close'] - df['S138'] # 0.35 en + et 0 en -
    features['FS162'] = df['Close'] - df['S162'] # 0.07 en * et 0 en -
    features['FS178'] = df['Close'] - df['S178'] # 0.07 en * et 0 en -
    features['FS200'] = df['Close'] - df['S200'] # 0.41 en * ou + et 0 en -
    features['FR38'] = df['Close'] - df['R38'] # 1.38 en *, 1.31 en + et 0 en -
    features['FR62'] = df['Close'] - df['R62'] # 0.41 en * et 0 en -
    features['FR78'] = df['Close'] - df['R78'] # 1.17 en +, 0.41 en * et 0 en -
    features['FR100'] = df['Close'] - df['R100'] # 1.66 en +, 1.31 en * et 0.28 en -
    features['FR138'] = df['Close'] - df['R138'] # 2.14 en +, 2.07 en * et 0.14 en -
    features['FR162'] = df['Close'] - df['R162'] # 2.9 en +, 2.28 en * et 0.35 en -
    features['FR178'] = df['Close'] - df['R178']# 2.7 en +, 2.14 en * et 0.28 en -
    features['FR200'] = df['Close'] - df['R200']# 2.97 en +, 2.83 en * et 0.07 en -
    features['AFPP'] = df['Close'] - df['PP'] # 0.35 en * et 0 en -
    features['AFS38'] = df['Close'] - df['S38'] # 0.28 en * et 0 en -
    features['AFS62'] = df['Close'] - df['S62'] # 0.48 en * et 0 en -
    features['AFS78'] = df['Close'] - df['S78'] # 0.28 en * et 0 en -
    features['AFS100'] = df['Close'] - df['S100'] # 0.14 en * et 0.07 en -
    features['AFS138'] = df['Close'] - df['S138'] # 0.35 en + et 0 en -
    features['AFS162'] = df['Close'] - df['S162'] # 0.07 en * et 0 en -
    features['AFS178'] = df['Close'] - df['S178'] # 0.07 en * et 0 en -
    features['AFS200'] = df['Close'] - df['S200'] # 0.41 en * ou + et 0 en -
    features['AFR38'] = df['Close'] - df['R38'] # 1.38 en *, 1.31 en + et 0 en -
    features['AFR62'] = df['Close'] - df['R62'] # 0.41 en * et 0 en -
    features['AFR78'] = df['Close'] - df['R78'] # 1.17 en +, 0.41 en * et 0 en -
    features['AFR100'] = df['Close'] - df['R100'] # 1.66 en +, 1.31 en * et 0.28 en -
    features['AFR138'] = df['Close'] - df['R138'] # 2.14 en +, 2.07 en * et 0.14 en -
    features['AFR162'] = df['Close'] - df['R162'] # 2.9 en +, 2.28 en * et 0.35 en -
    features['AFR178'] = df['Close'] - df['R178']# 2.7 en +, 2.14 en * et 0.28 en -
    features['AFR200'] = df['Close'] - df['R200']# 2.97 en +, 2.83 en * et 0.07 en -
    features['SBATR'] = (df['Close'] - df['Open']) / df['ATR_14'] # 0.21
    features['FRSI2'] = df['Close'] - df['RSI_2_hourly'] # 0.41 en +, 0.14 avec *df['Close']/100
    features['FRSI14'] = df['Close'] - df['RSI_14_hourly'] # 0.28 avec + 0.07 avec *df['Close']/100
    features['PP'] = df['PP'] # 0.35 en * et 0 en -
    features['S38'] = df['S38'] # 0.28 en * et 0 en -
    features['S62'] = df['S62'] # 0.48 en * et 0 en -
    features['S78'] = df['S78'] # 0.28 en * et 0 en -
    features['S100'] = df['S100'] # 0.14 en * et 0.07 en -
    features['S138'] = df['S138'] # 0.35 en + et 0 en -
    features['S162'] = df['S162'] # 0.07 en * et 0 en -
    features['S178'] = df['S178'] # 0.07 en * et 0 en -
    features['S200'] = df['S200'] # 0.41 en * ou + et 0 en -
    features['R38'] = df['R38'] # 1.38 en *, 1.31 en + et 0 en -
    features['R62'] = df['R62'] # 0.41 en * et 0 en -
    features['R78'] = df['R78'] # 1.17 en +, 0.41 en * et 0 en -
    features['R100'] = df['R100'] # 1.66 en +, 1.31 en * et 0.28 en -
    features['R138'] = df['R138'] # 2.14 en +, 2.07 en * et 0.14 en -
    features['R162'] = df['R162'] # 2.9 en +, 2.28 en * et 0.35 en -
    features['R178'] = df['R178']# 2.7 en +, 2.14 en * et 0.28 en -
    features['R200'] = df['R200']# 2.97 en +, 2.83 en * et 0.07 en -
    features['FFPP'] = (df['Close'] - df['PP']) # 0.35 en * et 0 en -
    features['FFS38'] = (df['Close'] - df['S38']) # 0.28 en * et 0 en -
    features['FFS62'] = (df['Close'] - df['S62']) # 0.48 en * et 0 en -
    features['FFS78'] = (df['Close'] - df['S78']) # 0.28 en * et 0 en -
    features['FFS100'] = (df['Close'] - df['S100']) # 0.14 en * et 0.07 en -
    features['FFS138'] = (df['Close'] - df['S138']) # 0.35 en + et 0 en -
    features['FFS162'] = (df['Close'] - df['S162']) # 0.07 en * et 0 en -
    features['FFS178'] = (df['Close'] - df['S178']) # 0.07 en * et 0 en -
    features['FFS200'] = (df['Close'] - df['S200']) # 0.41 en * ou + et 0 en -
    features['FFR38'] = (df['Close'] - df['R38']) # 1.38 en *, 1.31 en + et 0 en -
    features['FFR62'] = (df['Close'] - df['R62']) # 0.41 en * et 0 en -
    features['FFR78'] = (df['Close'] - df['R78']) # 1.17 en +, 0.41 en * et 0 en -
    features['FFR100'] = (df['Close'] - df['R100']) # 1.66 en +, 1.31 en * et 0.28 en -
    features['FFR138'] = (df['Close'] - df['R138']) # 2.14 en +, 2.07 en * et 0.14 en -
    features['FFR162'] = (df['Close'] - df['R162']) # 2.9 en +, 2.28 en * et 0.35 en -
    features['FFR178'] = (df['Close'] - df['R178'])# 2.7 en +, 2.14 en * et 0.28 en -
    features['FFR200'] = (df['Close'] - df['R200'])# 2.97 en +, 2.83 en * et 0.07 en -
    
    features['FFFPP'] = (df['Close'] - df['PP'])/df['ATR'] # 0.35 en * et 0 en -
    features['FFFS38'] = (df['Close'] - df['S38'])/df['ATR'] # 0.28 en * et 0 en -
    features['FFFS62'] = (df['Close'] - df['S62'])/df['ATR'] # 0.48 en * et 0 en -
    features['FFFS78'] = (df['Close'] - df['S78'])/df['ATR'] # 0.28 en * et 0 en -
    features['FFFS100'] = (df['Close'] - df['S100'])/df['ATR'] # 0.14 en * et 0.07 en -
    features['FFFS138'] = (df['Close'] - df['S138'])/df['ATR'] # 0.35 en + et 0 en -
    features['FFFS162'] = (df['Close'] - df['S162'])/df['ATR'] # 0.07 en * et 0 en -
    features['FFFS178'] = (df['Close'] - df['S178'])/df['ATR'] # 0.07 en * et 0 en -
    features['FFFS200'] = (df['Close'] - df['S200'])/df['ATR'] # 0.41 en * ou + et 0 en -
    features['FFFR38'] = (df['Close'] - df['R38'])/df['ATR'] # 1.38 en *, 1.31 en + et 0 en -
    features['FFFR62'] = (df['Close'] - df['R62'])/df['ATR'] # 0.41 en * et 0 en -
    features['FFFR78'] = (df['Close'] - df['R78'])/df['ATR'] # 1.17 en +, 0.41 en * et 0 en -
    features['FFFR100'] = (df['Close'] - df['R100'])/df['ATR'] # 1.66 en +, 1.31 en * et 0.28 en -
    features['FFFR138'] = (df['Close'] - df['R138'])/df['ATR'] # 2.14 en +, 2.07 en * et 0.14 en -
    features['FFFR162'] = (df['Close'] - df['R162'])/df['ATR'] # 2.9 en +, 2.28 en * et 0.35 en -
    features['FFFR178'] = (df['Close'] - df['R178'])/df['ATR']# 2.7 en +, 2.14 en * et 0.28 en -
    features['FFFR200'] = (df['Close'] - df['R200'])/df['ATR']

    features['OFFPP'] = (df['Close'] + df['PP']) # 0.35 en * et 0 en -
    features['OFFS38'] = (df['Close'] + df['S38']) # 0.28 en * et 0 en -
    features['OFFS62'] = (df['Close'] + df['S62']) # 0.48 en * et 0 en -
    features['OFFS78'] = (df['Close'] + df['S78']) # 0.28 en * et 0 en -
    features['OFFS100'] = (df['Close'] + df['S100']) # 0.14 en * et 0.07 en -
    features['OFFS138'] = (df['Close'] + df['S138']) # 0.35 en + et 0 en -
    features['OFFS162'] = (df['Close'] + df['S162']) # 0.07 en * et 0 en -
    features['OFFS178'] = (df['Close'] + df['S178']) # 0.07 en * et 0 en -
    features['OFFS200'] = (df['Close'] + df['S200']) # 0.41 en * ou + et 0 en -
    features['OFFR38'] = (df['Close'] + df['R38']) # 1.38 en *, 1.31 en + et 0 en -
    features['OFFR62'] = (df['Close'] + df['R62']) # 0.41 en * et 0 en -
    features['OFFR78'] = (df['Close'] + df['R78']) # 1.17 en +, 0.41 en * et 0 en -
    features['OFFR100'] = (df['Close'] + df['R100']) # 1.66 en +, 1.31 en * et 0.28 en -
    features['OFFR138'] = (df['Close'] + df['R138']) # 2.14 en +, 2.07 en * et 0.14 en -
    features['OFFR162'] = (df['Close'] + df['R162']) # 2.9 en +, 2.28 en * et 0.35 en -
    features['OFFR178'] = (df['Close'] + df['R178'])# 2.7 en +, 2.14 en * et 0.28 en -
    features['OFFR200'] = (df['Close'] + df['R200'])# 2.97 en +, 2.83 en * et 0.07 en -
    
    features['OFFFPP'] = (df['Close'] + df['PP'])/df['ATR'] # 0.35 en * et 0 en -
    features['OFFFS38'] = (df['Close'] + df['S38'])/df['ATR'] # 0.28 en * et 0 en -
    features['OFFFS62'] = (df['Close'] + df['S62'])/df['ATR'] # 0.48 en * et 0 en -
    features['OFFFS78'] = (df['Close'] + df['S78'])/df['ATR'] # 0.28 en * et 0 en -
    features['OFFFS100'] = (df['Close'] + df['S100'])/df['ATR'] # 0.14 en * et 0.07 en -
    features['OFFFS138'] = (df['Close'] + df['S138'])/df['ATR'] # 0.35 en + et 0 en -
    features['OFFFS162'] = (df['Close'] + df['S162'])/df['ATR'] # 0.07 en * et 0 en -
    features['OFFFS178'] = (df['Close'] + df['S178'])/df['ATR'] # 0.07 en * et 0 en -
    features['OFFFS200'] = (df['Close'] + df['S200'])/df['ATR'] # 0.41 en * ou + et 0 en -
    features['OFFFR38'] = (df['Close'] + df['R38'])/df['ATR'] # 1.38 en *, 1.31 en + et 0 en -
    features['OFFFR62'] = (df['Close'] + df['R62'])/df['ATR'] # 0.41 en * et 0 en -
    features['OFFFR78'] = (df['Close'] + df['R78'])/df['ATR'] # 1.17 en +, 0.41 en * et 0 en -
    features['OFFFR100'] = (df['Close'] + df['R100'])/df['ATR'] # 1.66 en +, 1.31 en * et 0.28 en -
    features['OFFFR138'] = (df['Close'] + df['R138'])/df['ATR'] # 2.14 en +, 2.07 en * et 0.14 en -
    features['OFFFR162'] = (df['Close'] + df['R162'])/df['ATR'] # 2.9 en +, 2.28 en * et 0.35 en -
    features['OFFFR178'] = (df['Close'] + df['R178'])/df['ATR']# 2.7 en +, 2.14 en * et 0.28 en -
    features['OFFFR200'] = (df['Close'] + df['R200'])/df['ATR']

    features['Signal'] = df['Signal']
    
    #features = features.dropna()
    return(features.sort_index(axis=0))